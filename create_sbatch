#!/bin/bash

# Initialize our own variables:
output_file=""
gpu=0

while getopts "h?vg" opt; do
  case "$opt" in
    h|\?)
      echo "Usage: $0 [-g] filename" 
      echo "Create a basic SBATCH template"
      echo "    -g              GPU - add line to request GPUs"
      exit 0
      ;;
    g)  gpu=1
      ;;
  esac
done

shift $((OPTIND-1))

output=$@


echo "#!/bin/bash -e

#SBATCH --nodes=1
#SBATCH --ntasks-per-node=1
#SBATCH --cpus-per-task=1
#SBATCH --time=1:00:00
#SBATCH --mem=2GB
#SBATCH --job-name=myTest
#SBATCH --mail-type=END
#SBATCH --output=slurm_%j.out" > ./$output.SBATCH

  if [ "$gpu" == 1 ]; then
    echo "#SBATCH --gres=gpu:1">> ./$output.SBATCH
  fi

  echo "
module purge" >> ./$output.SBATCH
